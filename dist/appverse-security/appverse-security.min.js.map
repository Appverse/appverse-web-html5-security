{"version":3,"file":"appverse-security.min.js","sources":["appverse-security.js"],"names":["configModule","$provide","$httpProvider","ModuleSeekerProvider","oauthResponseInterceptor","$q","$log","$injector","response","oauthAccessTokenService","get","tokenInHeader","headers","debug","setFromHeader","exists","factory","$cacheFactory","_browserCache","$inject","interceptors","push","logsOutUserOn401","$location","success","error","status","path","reject","promise","then","responseInterceptors","run","angular","module","config","AuthenticationServiceFactory","$rootScope","UserService","Base64","$http","SECURITY_GENERAL","sendLoginRequest","credentials","deferred","defer","encoded","encode","name","password","method","loginHTTPMethod","url","loginURL","Authorization","Content-Type","Headers_ContentType","timeout","cache","data","results","resolve","sendLogoutRequest","logoutHTTPMethod","logoutURL","login","roles","bToken","xsrfToken","isLogged","user","User","print","setCurrentUser","isLoggedIn","getCurrentUser","logOut","removeUser","OauthAccessTokenFactory","$cookies","setTokenFromString","scope","token","getTokenFromString","hash","removeFragment","setToken","getTokenFromCache","getXSRFTokenFromCache","splitted","split","params","i","length","param","key","value","access_token","setTokenFromCookies","storage","client","JSON","parse","setTokenInCookies","SECURITY_OAUTH","storage_cookies","stringify","setTokenInCurrentUser","extend","setExpiresAt","expires_at","Date","setSeconds","getSeconds","parseInt","expires_in","getXSRF","set","destroy","expired","OauthEndpointFactory","site","authorizePath","redirect","window","location","replace","OauthProfileFactory","Oauth_RequestWrapper","$resource","resource","profile","wrapRequest","OauthRequestWrapperFactory","$browser","Oauth_AccessToken","REST_CONFIG","setRequestHeaders","wrappedRestangular","isSameDomain","BaseUrl","xsrfHeaderValue","XSRFPolicyType","setDefaultHeaders","DefaultContentType","X-XSRF-TOKEN","cookies","XSRFCSRFCookieName","restangular","requestUrl","locationUrl","IS_SAME_DOMAIN_URL_MATCH","match","exec","domain1","protocol","host","port","int","DEFAULT_PORTS","relativeProtocol","undefined","URL_MATCH","domain2","directive","AccessToken","Endpoint","Profile","$compile","$templateCache","definition","restrict","flow","view","template","link","element","init","scopeURL","clientID","scope_authorizePath","tokenPath","scope_tokenPath","scope_template","compile","html","contents","initProfile","initView","loggedIn","denied","loggedOut","$broadcast","show","$watch","logout","$on","event","RoleServiceFactory","AUTHORIZATION_DATA","CacheFactory","validateRoleAdmin","result","adminRoles","j","_","contains","validateRoleInUserOther","role","UserServiceFactory","loggedUser","put","username","remove","this","prototype","toString"],"mappings":"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"}
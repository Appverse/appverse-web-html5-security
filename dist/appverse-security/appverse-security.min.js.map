{"version":3,"file":"appverse-security.min.js","sources":["appverse-security.js"],"names":["configModule","$provide","$httpProvider","ModuleSeekerProvider","oauthResponseInterceptor","$q","$log","$injector","response","oauthAccessTokenService","get","tokenInHeader","headers","debug","setFromHeader","exists","factory","$cacheFactory","_browserCache","$inject","interceptors","push","logsOutUserOn401","$location","responseError","rejection","status","path","reject","run","angular","module","config","AuthenticationServiceFactory","$rootScope","UserService","Base64","$http","SECURITY_GENERAL","sendLoginRequest","credentials","deferred","defer","encoded","encode","name","password","method","loginHTTPMethod","url","loginURL","Authorization","Content-Type","Headers_ContentType","timeout","cache","success","data","results","resolve","error","promise","sendLogoutRequest","logoutHTTPMethod","logoutURL","login","roles","bToken","xsrfToken","isLogged","user","User","print","setCurrentUser","isLoggedIn","getCurrentUser","logOut","removeUser","OauthAccessTokenFactory","$cookies","setTokenFromString","scope","token","getTokenFromString","hash","removeFragment","setToken","getTokenFromCache","getXSRFTokenFromCache","splitted","split","params","i","length","param","key","value","access_token","setTokenFromCookies","storage","client","JSON","parse","setTokenInCookies","SECURITY_OAUTH","storage_cookies","stringify","setTokenInCurrentUser","extend","setExpiresAt","expires_at","Date","setSeconds","getSeconds","parseInt","expires_in","getXSRF","set","destroy","expired","OauthEndpointFactory","site","authorizePath","redirect","window","location","replace","OauthProfileFactory","Oauth_RequestWrapper","$resource","resource","profile","wrapRequest","OauthRequestWrapperFactory","$browser","Oauth_AccessToken","REST_CONFIG","setRequestHeaders","wrappedRestangular","isSameDomain","BaseUrl","xsrfHeaderValue","XSRFPolicyType","setDefaultHeaders","DefaultContentType","X-XSRF-TOKEN","cookies","XSRFCSRFCookieName","restangular","requestUrl","locationUrl","IS_SAME_DOMAIN_URL_MATCH","match","exec","domain1","protocol","host","port","int","DEFAULT_PORTS","relativeProtocol","undefined","URL_MATCH","domain2","directive","AccessToken","Endpoint","Profile","$compile","$templateCache","definition","restrict","flow","view","template","link","element","attrs","init","scopeURL","clientID","scope_authorizePath","tokenPath","scope_tokenPath","scope_template","compile","html","contents","initProfile","initView","loggedIn","denied","loggedOut","$broadcast","show","$watch","logout","$on","event","RoleServiceFactory","AUTHORIZATION_DATA","CacheFactory","validateRoleAdmin","result","adminRoles","j","_","contains","validateRoleInUserOther","role","UserServiceFactory","loggedUser","put","username","remove","this","prototype","toString"],"mappings":"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"}
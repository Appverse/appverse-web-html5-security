{"version":3,"sources":["appverse-security.js"],"names":["configModule","$provide","$httpProvider","$injector","oauthResponseInterceptor","$q","$log","response","tokenInHeader","headers","debug","get","setFromHeader","has","factory","$cacheFactory","_browserCache","$inject","interceptors","push","logsOutUserOn401","$location","responseError","rejection","status","path","reject","run","angular","module","config","AuthenticationServiceFactory","$rootScope","UserService","Base64","$http","SECURITY_GENERAL","sendLoginRequest","credentials","deferred","defer","encoded","encode","name","password","method","loginHTTPMethod","url","loginURL","Authorization","Content-Type","Headers_ContentType","timeout","cache","success","data","results","resolve","error","promise","sendLogoutRequest","logoutHTTPMethod","logoutURL","login","roles","bToken","xsrfToken","isLogged","user","User","print","setCurrentUser","isLoggedIn","getCurrentUser","logOut","removeUser","OauthAccessTokenFactory","$cookies","setTokenFromString","scope","token","getTokenFromString","hash","removeFragment","setToken","getTokenFromCache","getXSRFTokenFromCache","splitted","split","params","i","length","param","key","value","access_token","setTokenFromCookies","storage","client","JSON","parse","setTokenInCookies","SECURITY_OAUTH","storage_cookies","stringify","setTokenInCurrentUser","extend","setExpiresAt","expires_at","Date","setSeconds","getSeconds","parseInt","expires_in","base","substring","lastIndexOf","fragment","getXSRF","set","destroy","expired","OauthEndpointFactory","site","authorizePath","redirect","window","location","replace","OauthProfileFactory","Oauth_RequestWrapper","$resource","resource","profile","wrapRequest","OauthRequestWrapperFactory","$browser","Oauth_AccessToken","REST_CONFIG","setRequestHeaders","wrappedRestangular","isSameDomain","BaseUrl","xsrfHeaderValue","XSRFPolicyType","setDefaultHeaders","DefaultContentType","X-XSRF-TOKEN","cookies","XSRFCSRFCookieName","restangular","requestUrl","locationUrl","IS_SAME_DOMAIN_URL_MATCH","match","exec","domain1","protocol","host","port","int","DEFAULT_PORTS","relativeProtocol","undefined","URL_MATCH","domain2","directive","AccessToken","Endpoint","Profile","$compile","$templateCache","definition","restrict","flow","view","template","link","element","init","scopeURL","clientID","scope_authorizePath","tokenPath","scope_tokenPath","scope_template","compile","html","contents","initProfile","initView","loggedIn","denied","loggedOut","$broadcast","show","$watch","logout","$on","event","RoleServiceFactory","AUTHORIZATION_DATA","avCacheFactory","validateRoleAdmin","result","adminRoles","j","_","contains","validateRoleInUserOther","role","UserServiceFactory","loggedUser","put","username","remove","this","prototype","toString"],"mappings":"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","file":"appverse-security.min.js"}
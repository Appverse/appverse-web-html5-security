{"version":3,"file":"appverse-security.min.js","sources":["appverse-security.js"],"names":["configModule","$provide","$httpProvider","oauthResponseInterceptor","$q","$log","$injector","response","oauthAccessTokenService","get","tokenInHeader","headers","debug","setFromHeader","$inject","factory","interceptors","push","logsOutUserOn401","$location","success","error","status","path","reject","promise","then","responseInterceptors","run","info","angular","module","config","AuthenticationServiceFactory","$rootScope","UserService","Base64","$http","SECURITY_GENERAL","sendLoginRequest","credentials","deferred","defer","encoded","encode","name","password","method","loginHTTPMethod","url","loginURL","Authorization","Content-Type","Headers_ContentType","timeout","cache","data","results","resolve","sendLogoutRequest","logoutHTTPMethod","logoutURL","login","roles","bToken","xsrfToken","isLogged","user","User","print","setCurrentUser","isLoggedIn","getCurrentUser","logOut","removeUser","OauthAccessTokenFactory","$cookies","CacheFactory","setTokenFromString","scope","token","getTokenFromString","hash","removeFragment","setToken","getTokenFromCache","getXSRFTokenFromCache","splitted","split","params","i","length","param","key","value","access_token","setTokenFromCookies","storage","client","JSON","parse","setTokenInCookies","SECURITY_OAUTH","storage_cookies","stringify","setTokenInCurrentUser","extend","setExpiresAt","expires_at","Date","setSeconds","getSeconds","parseInt","expires_in","getXSRF","set","destroy","expired","OauthEndpointFactory","site","authorizePath","redirect","window","location","replace","OauthProfileFactory","Oauth_RequestWrapper","$resource","resource","profile","wrapRequest","OauthRequestWrapperFactory","$browser","Oauth_AccessToken","REST_CONFIG","setRequestHeaders","wrappedRestangular","isSameDomain","BaseUrl","xsrfHeaderValue","XSRFPolicyType","setDefaultHeaders","DefaultContentType","X-XSRF-TOKEN","cookies","XSRFCSRFCookieName","restangular","requestUrl","locationUrl","IS_SAME_DOMAIN_URL_MATCH","match","exec","domain1","protocol","host","port","int","DEFAULT_PORTS","relativeProtocol","undefined","URL_MATCH","domain2","directive","AccessToken","Endpoint","Profile","$compile","$templateCache","definition","restrict","flow","view","template","link","element","init","scopeURL","clientID","scope_authorizePath","tokenPath","scope_tokenPath","scope_template","compile","html","contents","initProfile","initView","loggedIn","denied","loggedOut","$broadcast","show","$watch","logout","$on","event","RoleServiceFactory","AUTHORIZATION_DATA","validateRoleAdmin","_browserCache","result","adminRoles","j","_","contains","validateRoleInUserOther","role","currentUser","UserServiceFactory","loggedUser","put","username","remove","this","prototype","toString"],"mappings":"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"}